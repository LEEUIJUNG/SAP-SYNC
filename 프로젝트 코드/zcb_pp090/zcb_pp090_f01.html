<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
<title>ZCB_PP090_F01</title>
<style type="text/css">
.code{ font-family:"Courier New", Courier, monospace; color:#000; font-size:14px; background-color:#F2F4F7 }
  .codeComment {font-family:"Courier New", Courier, monospace; color:#0000F0; font-size:14px; background-color:#F2F4F7 }
  .normalBold{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px; font-weight:800 }
  .normalBoldLarge{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:16px; font-weight:800 }
</style>
<style type="text/css">
  .normal{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px }
  .footer{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px; text-align: center }
  h2{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:16px; font-weight:800 }
  h3{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:14px; font-weight:800 }
  .outerTable{
   background-color:#E0E7ED;
   width:100%;
   border-top-width: thin;
   border-right-width: thin;
   border-right-width: thin;
   border-left-width: thin;
   border-top-style: solid;
   border-right-style: solid;
   border-bottom-style: solid;
   border-left-style: solid;
  }
  .innerTable{
   background-color:#F2F4F7;
   width:100%;
   border-top-width: thin;
   border-right-width: thin;
   border-bottom-width: thin;
   border-left-width: thin;
   border-top-style: solid;
   border-right-style: solid;
   border-bottom-style: solid;
   border-left-style: solid;
  }
</style>
</head>
<body>
<table class="outerTable">
  <tr class="normalBoldLarge">
     <td><h2>Code listing for: ZCB_PP090_F01</h2>
<h3> Description: SUB</h3></td>
   </tr>
  <tr>
     <td>
     <table class="innerTable">
       <tr>
          <td>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZCB_PP090_F01<br />
*&---------------------------------------------------------------------*<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;display_0100<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;SCR&nbsp;0100&nbsp;을&nbsp;호출한다.<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM display_0100 .<br />
&nbsp;&nbsp;CALL&nbsp;SCREEN&nbsp;0100.<br />
ENDFORM.<br />
<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;set_alv_grid_0100<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;ALV&nbsp;를&nbsp;설정한다.<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM set_alv_grid_0100 USING p_structure TYPE dd02l-tabname<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ps_variant&nbsp;TYPE&nbsp;disvariant<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_save&nbsp;TYPE&nbsp;c<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ps_layo&nbsp;TYPE&nbsp;&nbsp;&nbsp;lvc_s_layo<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_ccon&nbsp;TYPE&nbsp;&nbsp;scrfname<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CHANGING&nbsp;ct_outtab&nbsp;TYPE&nbsp;ANY&nbsp;TABLE<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct_fieldcat&nbsp;TYPE&nbsp;lvc_t_fcat<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct_filter&nbsp;&nbsp;TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lvc_t_filt<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct_sort&nbsp;&nbsp;&nbsp;TYPE&nbsp;lvc_t_sort<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;co_container&nbsp;TYPE&nbsp;REF&nbsp;TO&nbsp;cl_gui_custom_container<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;co_alv_grid&nbsp;TYPE&nbsp;REF&nbsp;TO&nbsp;&nbsp;cl_gui_alv_grid.<br />
<br />
&nbsp;&nbsp;call&nbsp;function&nbsp;<a&nbsp;href&nbsp;="zcb_pp_alv_create/zcb_pp_alv_create.html">'ZCB_PP_ALV_CREATE'</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iv_structure&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;p_structure<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_variant&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ps_variant<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iv_save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;p_save<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_layout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ps_layo<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iv_ccon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;p_ccon<br />
&nbsp;&nbsp;&nbsp;&nbsp;CHANGING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct_outtab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ct_outtab<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct_fieldcat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ct_fieldcat<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct_filter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ct_filter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct_sort&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ct_sort<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;co_container&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;co_container<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;co_alv_grid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;co_alv_grid<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXCEPTIONS<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error_grid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;program_error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invalid_parameter_combination&nbsp;=&nbsp;3<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;too_many_lines&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;4<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error_container&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;5<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error_alv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;6<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;7.<br />
&nbsp;&nbsp;CASE&nbsp;sy-subrc.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;성공<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;1.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'ALV&nbsp;그리드&nbsp;바인딩&nbsp;오류'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;2.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'ALV&nbsp;프로그램&nbsp;오류'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;3.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'ALV&nbsp;파라미터&nbsp;조합&nbsp;오류'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;4.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'ALV&nbsp;행&nbsp;수&nbsp;초과&nbsp;오류'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;5.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'컨테이너&nbsp;생성&nbsp;오류'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;6.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'ALV&nbsp;Grid&nbsp;생성&nbsp;오류'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;OTHERS.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'알&nbsp;수&nbsp;없는&nbsp;오류&nbsp;발생'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;ENDCASE.<br />
<br />
ENDFORM.<br />
<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;set_alv_event_0100<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;ALV&nbsp;에&nbsp;이벤트&nbsp;핸들러&nbsp;등록<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM set_alv_event_0100  USING io_alv_grid TYPE REF TO cl_gui_alv_grid.<br />
&nbsp;&nbsp;SET&nbsp;HANDLER&nbsp;lcl_event_handler=&gt;on_toolbar&nbsp;FOR&nbsp;io_alv_grid.<br />
&nbsp;&nbsp;SET&nbsp;HANDLER&nbsp;lcl_event_handler=&gt;on_user_command&nbsp;FOR&nbsp;io_alv_grid.<br />
&nbsp;&nbsp;SET&nbsp;HANDLER&nbsp;lcl_event_handler=&gt;on_data_changed&nbsp;FOR&nbsp;io_alv_grid.<br />
<br />
ENDFORM.<br />
<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;alv_refresh_0100<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;ALV&nbsp;Refresh&nbsp;초기화<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM alv_refresh_0100  USING po_alv_grid TYPE REF TO cl_gui_alv_grid.<br />
&nbsp;&nbsp;po_alv_grid-&gt;refresh_table_display(&nbsp;).<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;get_init_data<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;SUBMIT&nbsp;으로&nbsp;전달받은&nbsp;데이터가&nbsp;있으면&nbsp;반영한다.<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM get_init_data .<br />
<br />
&nbsp;&nbsp;"&nbsp;구매및&nbsp;생산오더&nbsp;생성을&nbsp;위한&nbsp;제품&nbsp;정보&nbsp;취득<br />
&nbsp;&nbsp;SELECT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~matnr,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~mtart,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~matkl,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~meins,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b~maktx<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;@gt_mara<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zcb_mara&nbsp;AS&nbsp;a<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zcb_makt&nbsp;AS&nbsp;b<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ON&nbsp;a~matnr&nbsp;=&nbsp;b~matnr<br />
&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;b~spras&nbsp;=&nbsp;@sy-langu<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHERE<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~lvorm&nbsp;=&nbsp;''.<br />
<br />
&nbsp;&nbsp;IMPORT&nbsp;ls_submit_tab&nbsp;=&nbsp;gt_order&nbsp;FROM&nbsp;MEMORY&nbsp;ID&nbsp;'ZPP060'.&nbsp;"&nbsp;MRP&nbsp;요청<br />
&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;gv_flag_submit&nbsp;=&nbsp;'X'.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;메모리&nbsp;초기화<br />
&nbsp;&nbsp;&nbsp;&nbsp;FREE&nbsp;MEMORY&nbsp;ID&nbsp;'ZPP060'.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;PERFORM&nbsp;div_order.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;"&nbsp;생산공정시&nbsp;자재&nbsp;부족으로&nbsp;인한&nbsp;구매&nbsp;및&nbsp;생산&nbsp;요청<br />
&nbsp;&nbsp;IMPORT&nbsp;lt_eban&nbsp;=&nbsp;gt_purchase_temp&nbsp;FROM&nbsp;MEMORY&nbsp;ID&nbsp;'ZPP070'.<br />
&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CLEAR:&nbsp;gs_purchase_temp.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;gt_purchase_temp&nbsp;INTO&nbsp;gs_purchase_temp.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CLEAR:&nbsp;gs_purchase_r.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;gt_mara&nbsp;INTO&nbsp;gs_mara&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;gs_purchase_temp-matnr.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;한글&nbsp;자재명&nbsp;가져오기<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-maktx&nbsp;=&nbsp;gs_mara-maktx.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MOVE-CORRESPONDING&nbsp;gs_purchase_temp&nbsp;TO&nbsp;gs_purchase_r.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;gs_purchase_r&nbsp;TO&nbsp;gt_purchase_r.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDLOOP.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;gv_flag_submit&nbsp;=&nbsp;'X'.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;IMPORT&nbsp;lt_afko&nbsp;=&nbsp;gt_production_temp&nbsp;FROM&nbsp;MEMORY&nbsp;ID&nbsp;'ZPP070'.<br />
&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CLEAR:&nbsp;gs_production_temp.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;gt_production_temp&nbsp;INTO&nbsp;gs_production_temp.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CLEAR:&nbsp;gs_production_r.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;gt_mara&nbsp;INTO&nbsp;gs_mara&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;gs_production_temp-plnbez.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;한글&nbsp;자재명&nbsp;가져오기<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-maktx&nbsp;=&nbsp;gs_mara-maktx.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MOVE-CORRESPONDING&nbsp;gs_production_temp&nbsp;TO&nbsp;gs_production_r.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;gs_production_r&nbsp;TO&nbsp;gt_production_r.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDLOOP.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;gv_flag_submit&nbsp;=&nbsp;'X'.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;IF&nbsp;gv_flag_submit&nbsp;=&nbsp;'X'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;FREE&nbsp;MEMORY&nbsp;ID&nbsp;'ZPP070'.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;div_order<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;전달&nbsp;받은&nbsp;TAB&nbsp;을&nbsp;구매,&nbsp;생산&nbsp;요청&nbsp;TAB&nbsp;으로&nbsp;구분<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM div_order .<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;ls_gt_order&nbsp;LIKE&nbsp;LINE&nbsp;OF&nbsp;gt_order.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;lv_date_start&nbsp;TYPE&nbsp;sy-datum,&nbsp;"&nbsp;주차의&nbsp;월요일&nbsp;날짜<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lv_date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;sy-datum,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lv_week&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;scal-week.<br />
<br />
&nbsp;&nbsp;CLEAR:&nbsp;gt_purchase_r,&nbsp;gt_production_r.<br />
<br />
&nbsp;&nbsp;"&nbsp;자재별&nbsp;저장위치<br />
&nbsp;&nbsp;DATA:&nbsp;lt_marc&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;zcb_marc,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_marc&nbsp;TYPE&nbsp;zcb_marc.<br />
<br />
&nbsp;&nbsp;SELECT<br />
&nbsp;&nbsp;&nbsp;&nbsp;matnr,<br />
&nbsp;&nbsp;&nbsp;&nbsp;werks,<br />
&nbsp;&nbsp;&nbsp;&nbsp;lgpro<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zcb_marc<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;@lt_marc.<br />
<br />
&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;gt_order&nbsp;INTO&nbsp;ls_gt_order.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;lv_week&nbsp;=&nbsp;|2025{&nbsp;ls_gt_order-week&nbsp;}|.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;주차&nbsp;시작(월요일)&nbsp;날짜&nbsp;구하기<br />
&nbsp;&nbsp;&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'WEEK_GET_FIRST_DAY'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;week&nbsp;=&nbsp;lv_week&nbsp;&nbsp;"&nbsp;202524&nbsp;이런&nbsp;주차&nbsp;형태<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;date&nbsp;=&nbsp;lv_date_start.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;월&nbsp;~&nbsp;일&nbsp;순서대로&nbsp;체크<br />
&nbsp;&nbsp;&nbsp;&nbsp;DO&nbsp;7&nbsp;TIMES.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lv_date&nbsp;=&nbsp;lv_date_start&nbsp;+&nbsp;sy-index&nbsp;-&nbsp;1.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CASE&nbsp;sy-index.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;1.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;ls_gt_order-mon&nbsp;=&nbsp;0.&nbsp;CONTINUE.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;2.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;ls_gt_order-tue&nbsp;=&nbsp;0.&nbsp;CONTINUE.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;3.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;ls_gt_order-wed&nbsp;=&nbsp;0.&nbsp;CONTINUE.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;4.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;ls_gt_order-thu&nbsp;=&nbsp;0.&nbsp;CONTINUE.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;5.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;ls_gt_order-fri&nbsp;=&nbsp;0.&nbsp;CONTINUE.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;6.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;ls_gt_order-sat&nbsp;=&nbsp;0.&nbsp;CONTINUE.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;7.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;ls_gt_order-sun&nbsp;=&nbsp;0.&nbsp;CONTINUE.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDCASE.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;구매&nbsp;생산&nbsp;오더&nbsp;분기<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;ls_gt_order-category&nbsp;=&nbsp;'구매요청'.<br />
<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CLEAR&nbsp;gs_purchase_r.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-werks&nbsp;&nbsp;=&nbsp;ls_gt_order-werks.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-matnr&nbsp;=&nbsp;ls_gt_order-idnrk.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CASE&nbsp;sy-index.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;1.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-menge&nbsp;=&nbsp;ls_gt_order-mon.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;2.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-menge&nbsp;=&nbsp;ls_gt_order-tue.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;3.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-menge&nbsp;=&nbsp;ls_gt_order-wed.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;4.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-menge&nbsp;=&nbsp;ls_gt_order-thu.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;5.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-menge&nbsp;=&nbsp;ls_gt_order-fri.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;6.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-menge&nbsp;=&nbsp;ls_gt_order-sat.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;7.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-menge&nbsp;=&nbsp;ls_gt_order-sun.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDCASE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-meins&nbsp;&nbsp;=&nbsp;ls_gt_order-meins.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-eindt&nbsp;&nbsp;=&nbsp;lv_date.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;저장위치를&nbsp;가져옴<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_marc&nbsp;INTO&nbsp;ls_marc&nbsp;WITH&nbsp;KEY&nbsp;werks&nbsp;=&nbsp;ls_gt_order-werks&nbsp;&nbsp;matnr&nbsp;=&nbsp;ls_gt_order-idnrk.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-lgort&nbsp;&nbsp;=&nbsp;ls_marc-lgpro.<br />
<br />
<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;gt_mara&nbsp;INTO&nbsp;gs_mara&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;gs_purchase_r-matnr.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;한글&nbsp;자재명&nbsp;가져오기<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-maktx&nbsp;=&nbsp;gs_mara-maktx.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;gs_purchase_r&nbsp;TO&nbsp;gt_purchase_r.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ELSEIF&nbsp;ls_gt_order-category&nbsp;=&nbsp;'생산요청'.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CLEAR&nbsp;gs_production_r.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-werks&nbsp;&nbsp;=&nbsp;ls_gt_order-werks.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-plnbez&nbsp;=&nbsp;ls_gt_order-idnrk.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CASE&nbsp;sy-index.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;1.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-gamng&nbsp;=&nbsp;ls_gt_order-mon.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;2.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-gamng&nbsp;=&nbsp;ls_gt_order-tue.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;3.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-gamng&nbsp;=&nbsp;ls_gt_order-wed.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;4.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-gamng&nbsp;=&nbsp;ls_gt_order-thu.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;5.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-gamng&nbsp;=&nbsp;ls_gt_order-fri.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;6.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-gamng&nbsp;=&nbsp;ls_gt_order-sat.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;7.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-gamng&nbsp;=&nbsp;ls_gt_order-sun.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDCASE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-meins&nbsp;&nbsp;=&nbsp;ls_gt_order-meins.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-gltrs&nbsp;&nbsp;=&nbsp;lv_date.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;gt_mara&nbsp;INTO&nbsp;gs_mara&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;gs_production_r-plnbez.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;한글&nbsp;자재명&nbsp;가져오기<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-maktx&nbsp;=&nbsp;gs_mara-maktx.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;gs_production_r&nbsp;TO&nbsp;gt_production_r.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDDO.<br />
<br />
&nbsp;&nbsp;ENDLOOP.<br />
<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;test_data<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;삭제&nbsp;예정<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM test_data .<br />
&nbsp;&nbsp;DATA:&nbsp;gs_order&nbsp;LIKE&nbsp;LINE&nbsp;OF&nbsp;gt_order.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gt_order.<br />
<br />
&nbsp;&nbsp;"&nbsp;구매요청&nbsp;PK101<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_order.<br />
&nbsp;&nbsp;gs_order-werks&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'1000'.<br />
&nbsp;&nbsp;gs_order-category&nbsp;=&nbsp;'구매요청'.<br />
&nbsp;&nbsp;gs_order-idnrk&nbsp;&nbsp;&nbsp;=&nbsp;'PK101'.<br />
&nbsp;&nbsp;gs_order-total_qty&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'10.000'.<br />
&nbsp;&nbsp;gs_order-meins&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'EA'.<br />
&nbsp;&nbsp;gs_order-mon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'10.000'.<br />
&nbsp;&nbsp;gs_order-tue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-wed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-thu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-fri&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-sat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-sun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-week&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'52'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_order&nbsp;TO&nbsp;gt_order.<br />
<br />
&nbsp;&nbsp;"&nbsp;구매요청&nbsp;PK102<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_order.<br />
&nbsp;&nbsp;gs_order-werks&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'1000'.<br />
&nbsp;&nbsp;gs_order-category&nbsp;=&nbsp;'구매요청'.<br />
&nbsp;&nbsp;gs_order-idnrk&nbsp;&nbsp;&nbsp;=&nbsp;'PK102'.<br />
&nbsp;&nbsp;gs_order-total_qty&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'10.000'.<br />
&nbsp;&nbsp;gs_order-meins&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'EA'.<br />
&nbsp;&nbsp;gs_order-mon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'10.000'.<br />
&nbsp;&nbsp;gs_order-tue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-wed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-thu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-fri&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-sat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-sun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'0.000'.<br />
&nbsp;&nbsp;gs_order-week&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'52'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_order&nbsp;TO&nbsp;gt_order.<br />
<br />
&nbsp;&nbsp;"&nbsp;구매요청&nbsp;RM102<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_order.<br />
&nbsp;&nbsp;gs_order-werks&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'1000'.<br />
&nbsp;&nbsp;gs_order-category&nbsp;=&nbsp;'구매요청'.<br />
&nbsp;&nbsp;gs_order-idnrk&nbsp;&nbsp;&nbsp;=&nbsp;'RM102'.<br />
&nbsp;&nbsp;gs_order-total_qty&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'100.000'.<br />
&nbsp;&nbsp;gs_order-meins&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'EA'.<br />
&nbsp;&nbsp;gs_order-mon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-tue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-wed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-thu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-fri&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-sat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-sun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-week&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'52'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_order&nbsp;TO&nbsp;gt_order.<br />
<br />
&nbsp;&nbsp;"&nbsp;생산요청&nbsp;RM102<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_order.<br />
&nbsp;&nbsp;gs_order-werks&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'1000'.<br />
&nbsp;&nbsp;gs_order-category&nbsp;=&nbsp;'생산요청'.<br />
&nbsp;&nbsp;gs_order-idnrk&nbsp;&nbsp;&nbsp;=&nbsp;'RM102'.<br />
&nbsp;&nbsp;gs_order-total_qty&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'100.000'.<br />
&nbsp;&nbsp;gs_order-meins&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'EA'.<br />
&nbsp;&nbsp;gs_order-mon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-tue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-wed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-thu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-fri&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-sat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-sun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'14.000'.<br />
&nbsp;&nbsp;gs_order-week&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'52'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_order&nbsp;TO&nbsp;gt_order.<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;set_alv_eban_0100<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;구매요청&nbsp;ALV&nbsp;FCAT&nbsp;LAYO<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM set_alv_eban_0100  USING    pv_edit TYPE c.<br />
<br />
&nbsp;&nbsp;CLEAR:&nbsp;gs_layo1,&nbsp;gs_variant1&nbsp;,&nbsp;gt_fcat1.<br />
<br />
&nbsp;&nbsp;gs_variant1-report&nbsp;=&nbsp;sy-cprog.<br />
&nbsp;&nbsp;gs_variant1-handle&nbsp;=&nbsp;'ALV1'.<br />
   </div>
   <div class="codeComment">
*&nbsp;ADD1&nbsp;---------<br />
*&nbsp;ALV&nbsp;report&nbsp;+&nbsp;handle&nbsp;단위로&nbsp;구분(프로그램&nbsp;NAME,&nbsp;ALV_NAME)<br />
*&nbsp;&nbsp;gs_variant1-handle&nbsp;임의&nbsp;값을&nbsp;줘서&nbsp;ALV&nbsp;끼리&nbsp;구분을&nbsp;한다(C4).<br />
*&nbsp;-----------<br />
   </div>
   <div class="code">
&nbsp;&nbsp;gv_save1&nbsp;=&nbsp;'A'.<br />
<br />
&nbsp;&nbsp;gs_layo1-no_rowins&nbsp;=&nbsp;'X'.&nbsp;"&nbsp;행추가,&nbsp;삭제&nbsp;toolbar&nbsp;btn&nbsp;잠금<br />
&nbsp;&nbsp;gs_layo1-sel_mode&nbsp;=&nbsp;'A'.&nbsp;"&nbsp;CELL&nbsp;단위&nbsp;선택가능<br />
&nbsp;&nbsp;gs_layo1-zebra&nbsp;=&nbsp;abap_on.&nbsp;"&nbsp;얼룩처리<br />
&nbsp;&nbsp;gs_layo1-grid_title&nbsp;=&nbsp;'구매요청'.<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;gs_layo1-stylefname&nbsp;=&nbsp;'CELLTAB'.<br />
*&nbsp;&nbsp;gs_layo3-cwidth_opt&nbsp;=&nbsp;abap_on.&nbsp;"&nbsp;열넓이&nbsp;최적화&nbsp;샐&nbsp;넓이가&nbsp;고정이&nbsp;되어버림&nbsp;최적으로<br />
*&nbsp;&nbsp;gs_layo1-edit&nbsp;=&nbsp;''.&nbsp;"&nbsp;수정모드&nbsp;전체&nbsp;필드가&nbsp;수정&nbsp;가능하게&nbsp;되어짐<br />
<br />
   </div>
   <div class="code">
&nbsp;&nbsp;"&nbsp;미사용&nbsp;필드<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
*&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'APPROV_T'.<br />
*&nbsp;&nbsp;gs_fcat1-no_out&nbsp;=&nbsp;'X'.<br />
*&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
   </div>
   <div class="code">
&nbsp;&nbsp;"&nbsp;사용할&nbsp;필드<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'WERKS'.<br />
&nbsp;&nbsp;gs_fcat1-coltext&nbsp;=&nbsp;'플랜트'.<br />
&nbsp;&nbsp;gs_fcat1-outputlen&nbsp;&nbsp;=&nbsp;5.<br />
&nbsp;&nbsp;gs_fcat1-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'MATNR'.<br />
&nbsp;&nbsp;gs_fcat1-coltext&nbsp;=&nbsp;'자재번호'.<br />
&nbsp;&nbsp;gs_fcat1-outputlen&nbsp;&nbsp;=&nbsp;12.<br />
&nbsp;&nbsp;gs_fcat1-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'MAKTX'.<br />
&nbsp;&nbsp;gs_fcat1-coltext&nbsp;=&nbsp;'자재설명'.<br />
&nbsp;&nbsp;gs_fcat1-outputlen&nbsp;&nbsp;=&nbsp;12.<br />
&nbsp;&nbsp;gs_fcat1-col_pos&nbsp;=&nbsp;3.<br />
&nbsp;&nbsp;gs_fcat1-just&nbsp;=&nbsp;'L'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'MENGE'.<br />
&nbsp;&nbsp;gs_fcat1-coltext&nbsp;=&nbsp;'구매요청&nbsp;수량'.<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;gs_fcat1-edit&nbsp;=&nbsp;pv_edit.<br />
   </div>
   <div class="code">
&nbsp;&nbsp;gs_fcat1-ref_field&nbsp;=&nbsp;'MEINS'.<br />
&nbsp;&nbsp;gs_fcat1-outputlen&nbsp;&nbsp;=&nbsp;12.<br />
&nbsp;&nbsp;gs_fcat1-just&nbsp;=&nbsp;'R'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'MEINS'.<br />
&nbsp;&nbsp;gs_fcat1-coltext&nbsp;=&nbsp;'단위'.<br />
&nbsp;&nbsp;gs_fcat1-outputlen&nbsp;&nbsp;=&nbsp;3.<br />
&nbsp;&nbsp;gs_fcat1-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'LGORT'.<br />
&nbsp;&nbsp;gs_fcat1-coltext&nbsp;=&nbsp;'저장위치'.<br />
&nbsp;&nbsp;gs_fcat1-outputlen&nbsp;&nbsp;=&nbsp;6.<br />
&nbsp;&nbsp;gs_fcat1-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'EINDT'.<br />
&nbsp;&nbsp;gs_fcat1-coltext&nbsp;=&nbsp;'입고요청일'.<br />
&nbsp;&nbsp;gs_fcat1-outputlen&nbsp;&nbsp;=&nbsp;12.<br />
&nbsp;&nbsp;gs_fcat1-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;set_alv_afko_0100<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;생산요청&nbsp;FCAT&nbsp;LAYO<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM set_alv_afko_0100  USING pv_edit TYPE c.<br />
<br />
&nbsp;&nbsp;CLEAR:&nbsp;gs_layo2,&nbsp;gs_variant2&nbsp;,&nbsp;gt_fcat2.<br />
<br />
&nbsp;&nbsp;gs_variant2-report&nbsp;=&nbsp;sy-cprog.<br />
&nbsp;&nbsp;gs_variant2-handle&nbsp;=&nbsp;'ALV2'.<br />
&nbsp;&nbsp;gv_save2&nbsp;=&nbsp;'A'.<br />
<br />
&nbsp;&nbsp;gs_layo2-no_rowins&nbsp;=&nbsp;'X'.&nbsp;"&nbsp;행추가,&nbsp;삭제&nbsp;toolbar&nbsp;btn&nbsp;잠금<br />
&nbsp;&nbsp;gs_layo2-sel_mode&nbsp;=&nbsp;'A'.&nbsp;"&nbsp;CELL&nbsp;단위&nbsp;선택가능<br />
&nbsp;&nbsp;gs_layo2-zebra&nbsp;=&nbsp;abap_on.&nbsp;"&nbsp;얼룩처리<br />
&nbsp;&nbsp;gs_layo2-grid_title&nbsp;=&nbsp;'생산오더&nbsp;생성'.<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;gs_layo1-stylefname&nbsp;=&nbsp;'CELLTAB'.<br />
*&nbsp;&nbsp;gs_layo3-cwidth_opt&nbsp;=&nbsp;abap_on.&nbsp;"&nbsp;열넓이&nbsp;최적화&nbsp;샐&nbsp;넓이가&nbsp;고정이&nbsp;되어버림&nbsp;최적으로<br />
*&nbsp;&nbsp;gs_layo1-edit&nbsp;=&nbsp;''.&nbsp;"&nbsp;수정모드&nbsp;전체&nbsp;필드가&nbsp;수정&nbsp;가능하게&nbsp;되어짐<br />
<br />
   </div>
   <div class="code">
&nbsp;&nbsp;"&nbsp;미사용&nbsp;필드<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;CLEAR&nbsp;gs_fcat1.<br />
*&nbsp;&nbsp;gs_fcat1-fieldname&nbsp;=&nbsp;'APPROV_T'.<br />
*&nbsp;&nbsp;gs_fcat1-no_out&nbsp;=&nbsp;'X'.<br />
*&nbsp;&nbsp;APPEND&nbsp;gs_fcat1&nbsp;TO&nbsp;gt_fcat1.<br />
<br />
   </div>
   <div class="code">
&nbsp;&nbsp;"&nbsp;사용할&nbsp;필드<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat2.<br />
&nbsp;&nbsp;gs_fcat2-fieldname&nbsp;=&nbsp;'WERKS'.<br />
&nbsp;&nbsp;gs_fcat2-coltext&nbsp;=&nbsp;'플랜트'.<br />
&nbsp;&nbsp;gs_fcat2-outputlen&nbsp;&nbsp;=&nbsp;5.<br />
&nbsp;&nbsp;gs_fcat2-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat2&nbsp;TO&nbsp;gt_fcat2.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat2.<br />
&nbsp;&nbsp;gs_fcat2-fieldname&nbsp;=&nbsp;'PLNBEZ'.<br />
&nbsp;&nbsp;gs_fcat2-coltext&nbsp;=&nbsp;'자재번호'.<br />
&nbsp;&nbsp;gs_fcat2-outputlen&nbsp;&nbsp;=&nbsp;12.<br />
&nbsp;&nbsp;gs_fcat2-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat2&nbsp;TO&nbsp;gt_fcat2.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat2.<br />
&nbsp;&nbsp;gs_fcat2-fieldname&nbsp;=&nbsp;'MAKTX'.<br />
&nbsp;&nbsp;gs_fcat2-coltext&nbsp;=&nbsp;'자재명'.<br />
&nbsp;&nbsp;gs_fcat2-outputlen&nbsp;&nbsp;=&nbsp;12.<br />
&nbsp;&nbsp;gs_fcat2-col_pos&nbsp;=&nbsp;3.<br />
&nbsp;&nbsp;gs_fcat2-just&nbsp;=&nbsp;'L'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat2&nbsp;TO&nbsp;gt_fcat2.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat2.<br />
&nbsp;&nbsp;gs_fcat2-fieldname&nbsp;=&nbsp;'GAMNG'.<br />
&nbsp;&nbsp;gs_fcat2-coltext&nbsp;=&nbsp;'생산요청&nbsp;수량'.<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;gs_fcat2-edit&nbsp;=&nbsp;pv_edit.<br />
   </div>
   <div class="code">
&nbsp;&nbsp;gs_fcat2-outputlen&nbsp;&nbsp;=&nbsp;12.<br />
&nbsp;&nbsp;gs_fcat2-ref_field&nbsp;=&nbsp;'MEINS'.<br />
&nbsp;&nbsp;gs_fcat2-just&nbsp;=&nbsp;'R'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat2&nbsp;TO&nbsp;gt_fcat2.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat2.<br />
&nbsp;&nbsp;gs_fcat2-fieldname&nbsp;=&nbsp;'MEINS'.<br />
&nbsp;&nbsp;gs_fcat2-coltext&nbsp;=&nbsp;'단위'.<br />
&nbsp;&nbsp;gs_fcat2-outputlen&nbsp;&nbsp;=&nbsp;3.<br />
&nbsp;&nbsp;gs_fcat2-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat2&nbsp;TO&nbsp;gt_fcat2.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;gs_fcat2.<br />
&nbsp;&nbsp;gs_fcat2-fieldname&nbsp;=&nbsp;'GLTRS'.<br />
&nbsp;&nbsp;gs_fcat2-coltext&nbsp;=&nbsp;'생산요청일'.<br />
&nbsp;&nbsp;gs_fcat2-outputlen&nbsp;&nbsp;=&nbsp;12.<br />
&nbsp;&nbsp;gs_fcat2-just&nbsp;=&nbsp;'C'.<br />
&nbsp;&nbsp;APPEND&nbsp;gs_fcat2&nbsp;TO&nbsp;gt_fcat2.<br />
<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;add_purchase<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;입력값&nbsp;구매요청&nbsp;태이블&nbsp;추가<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM add_purchase .<br />
<br />
&nbsp;&nbsp;CLEAR:&nbsp;gs_purchase_r.<br />
<br />
&nbsp;&nbsp;"&nbsp;모든&nbsp;필드&nbsp;값이&nbsp;입력되어야함.<br />
&nbsp;&nbsp;IF&nbsp;zcb_eban-matnr&nbsp;IS&nbsp;INITIAL<br />
&nbsp;&nbsp;&nbsp;&nbsp;OR&nbsp;zcb_eban-werks&nbsp;IS&nbsp;INITIAL<br />
&nbsp;&nbsp;&nbsp;&nbsp;OR&nbsp;zcb_eban-menge&nbsp;IS&nbsp;INITIAL<br />
&nbsp;&nbsp;&nbsp;&nbsp;OR&nbsp;zcb_eban-eindt&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'모든&nbsp;구매요청&nbsp;필드를&nbsp;입력해주세요.'&nbsp;&nbsp;TYPE&nbsp;'I'&nbsp;DISPLAY&nbsp;LIKE&nbsp;'W'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;IF&nbsp;zcb_eban-eindt&nbsp;&lt;&nbsp;sy-datum.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'오늘&nbsp;이전&nbsp;시점으로&nbsp;구매요청을&nbsp;진행할&nbsp;수&nbsp;없습니다.'&nbsp;TYPE&nbsp;'I'&nbsp;DISPLAY&nbsp;LIKE&nbsp;'W'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;gs_purchase_r-matnr&nbsp;=&nbsp;zcb_eban-matnr.<br />
&nbsp;&nbsp;gs_purchase_r-werks&nbsp;=&nbsp;zcb_eban-werks.<br />
&nbsp;&nbsp;gs_purchase_r-menge&nbsp;=&nbsp;zcb_eban-menge.<br />
&nbsp;&nbsp;gs_purchase_r-eindt&nbsp;=&nbsp;zcb_eban-eindt.<br />
<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;gt_mara&nbsp;INTO&nbsp;gs_mara&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;zcb_eban-matnr.<br />
&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;한글&nbsp;자재명&nbsp;가져오기<br />
&nbsp;&nbsp;&nbsp;&nbsp;gs_purchase_r-maktx&nbsp;=&nbsp;gs_mara-maktx.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;"&nbsp;자재별&nbsp;저장위치<br />
&nbsp;&nbsp;DATA:&nbsp;lt_marc&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;zcb_marc,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_marc&nbsp;TYPE&nbsp;zcb_marc.<br />
<br />
&nbsp;&nbsp;SELECT<br />
&nbsp;&nbsp;&nbsp;&nbsp;matnr,<br />
&nbsp;&nbsp;&nbsp;&nbsp;werks,<br />
&nbsp;&nbsp;&nbsp;&nbsp;lgpro<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zcb_marc<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;@lt_marc.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_marc&nbsp;INTO&nbsp;ls_marc&nbsp;WITH&nbsp;KEY&nbsp;werks&nbsp;=&nbsp;zcb_eban-werks&nbsp;&nbsp;matnr&nbsp;=&nbsp;zcb_eban-matnr.<br />
<br />
&nbsp;&nbsp;gs_purchase_r-lgort&nbsp;=&nbsp;ls_marc-lgpro.<br />
<br />
<br />
&nbsp;&nbsp;"&nbsp;자재별&nbsp;단위<br />
&nbsp;&nbsp;DATA:&nbsp;lt_mara&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;zcb_mara,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_mara&nbsp;TYPE&nbsp;zcb_mara.<br />
<br />
&nbsp;&nbsp;SELECT<br />
&nbsp;&nbsp;&nbsp;&nbsp;matnr,<br />
&nbsp;&nbsp;&nbsp;&nbsp;meins<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zcb_mara<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;@lt_mara.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_mara&nbsp;INTO&nbsp;ls_mara&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;zcb_eban-matnr.<br />
<br />
&nbsp;&nbsp;gs_purchase_r-meins&nbsp;=&nbsp;ls_mara-meins.<br />
<br />
&nbsp;&nbsp;APPEND&nbsp;gs_purchase_r&nbsp;TO&nbsp;gt_purchase_r.<br />
<br />
<br />
&nbsp;&nbsp;PERFORM&nbsp;alv_refresh_0100&nbsp;USING&nbsp;go_alv_grid1.<br />
<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;add_production<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;생산요청&nbsp;입력정보&nbsp;추가<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM add_production .<br />
<br />
&nbsp;&nbsp;CLEAR:&nbsp;gs_production_r.<br />
<br />
&nbsp;&nbsp;"&nbsp;모든&nbsp;필드&nbsp;값이&nbsp;입력되어야함.<br />
&nbsp;&nbsp;IF&nbsp;zcb_afko-plnbez&nbsp;IS&nbsp;INITIAL<br />
&nbsp;&nbsp;&nbsp;&nbsp;OR&nbsp;zcb_afko-werks&nbsp;IS&nbsp;INITIAL<br />
&nbsp;&nbsp;&nbsp;&nbsp;OR&nbsp;zcb_afko-gamng&nbsp;IS&nbsp;INITIAL<br />
&nbsp;&nbsp;&nbsp;&nbsp;OR&nbsp;zcb_afko-gltrs&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'모든&nbsp;생산요청&nbsp;필드를&nbsp;입력해주세요.'&nbsp;TYPE&nbsp;'I'&nbsp;DISPLAY&nbsp;LIKE&nbsp;'W'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;IF&nbsp;zcb_afko-gamng&nbsp;MOD&nbsp;10&nbsp;&lt;&gt;&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'10의&nbsp;단위&nbsp;로만&nbsp;생산이&nbsp;가능합니다.'&nbsp;TYPE&nbsp;'I'&nbsp;DISPLAY&nbsp;LIKE&nbsp;'W'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
<br />
&nbsp;&nbsp;IF&nbsp;zcb_afko-gltrs&nbsp;&lt;&nbsp;sy-datum.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'오늘&nbsp;이전&nbsp;시점으로&nbsp;생산오더를&nbsp;진행할&nbsp;수&nbsp;없습니다.'&nbsp;TYPE&nbsp;'I'&nbsp;DISPLAY&nbsp;LIKE&nbsp;'W'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;gs_production_r-plnbez&nbsp;=&nbsp;zcb_afko-plnbez.<br />
&nbsp;&nbsp;gs_production_r-werks&nbsp;=&nbsp;zcb_afko-werks.<br />
&nbsp;&nbsp;gs_production_r-gamng&nbsp;=&nbsp;zcb_afko-gamng.<br />
&nbsp;&nbsp;gs_production_r-gltrs&nbsp;=&nbsp;zcb_afko-gltrs.<br />
<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;gt_mara&nbsp;INTO&nbsp;gs_mara&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;zcb_afko-plnbez.<br />
&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;한글&nbsp;자재명&nbsp;가져오기<br />
&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-maktx&nbsp;=&nbsp;gs_mara-maktx.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;"&nbsp;단위&nbsp;추가<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;gt_mara&nbsp;INTO&nbsp;DATA(ls_mara)&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;zcb_afko-plnbez.<br />
&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;gs_production_r-meins&nbsp;=&nbsp;ls_mara-meins.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;APPEND&nbsp;gs_production_r&nbsp;TO&nbsp;gt_production_r.<br />
<br />
<br />
&nbsp;&nbsp;PERFORM&nbsp;alv_refresh_0100&nbsp;USING&nbsp;go_alv_grid2.<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;ADD_EBAN<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;구매요청&nbsp;DB&nbsp;추가<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM add_eban .<br />
&nbsp;&nbsp;DATA(lv_answer)&nbsp;=&nbsp;''.<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'POPUP_TO_CONFIRM'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;titlebar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'구매요청&nbsp;생성'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_question&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'구매요청을&nbsp;생성하시겠습니까?'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_button_1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'확인'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_button_2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'취소'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_button&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'2'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_cancel_button&nbsp;=&nbsp;'&nbsp;'<br />
&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;answer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lv_answer.<br />
<br />
&nbsp;&nbsp;IF&nbsp;lv_answer&nbsp;&lt;&gt;&nbsp;'1'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;lt_eban&nbsp;&nbsp;TYPE&nbsp;&nbsp;zcb_eban_t.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;lv_banfn&nbsp;TYPE&nbsp;&nbsp;zcb_banfn,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lV_BNFPO&nbsp;TYPE&nbsp;&nbsp;zcb_bnfpo.<br />
<br />
&nbsp;&nbsp;MOVE-CORRESPONDING&nbsp;gt_purchase_r&nbsp;TO&nbsp;lt_eban.<br />
<br />
&nbsp;&nbsp;call&nbsp;function&nbsp;<a&nbsp;href&nbsp;="zcb_mm_create_pr/zcb_mm_create_pr.html">'ZCB_MM_CREATE_PR'</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it_eban&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_eban&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;구매요청&nbsp;함수&nbsp;테이블<br />
&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e_banfn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lv_banfn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;구매요청&nbsp;번호<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e_bnfpo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lv_bnfpo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;구매요청&nbsp;품목&nbsp;번호<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXCEPTIONS<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invalid_quantity&nbsp;&nbsp;&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;입력&nbsp;수량이&nbsp;0&nbsp;이하인&nbsp;경우<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number_range_error&nbsp;=&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;넘버레인지&nbsp;채번&nbsp;실패인&nbsp;경우<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert_failed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;DB&nbsp;Insert&nbsp;실패인&nbsp;경우<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;4.<br />
<br />
&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;&lt;&gt;&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CASE&nbsp;sy-subrc.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;1.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'구매요청&nbsp;수량이&nbsp;0&nbsp;이하입니다.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;2.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'구매요청&nbsp;번호&nbsp;채번&nbsp;실패.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;3.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'구매요청&nbsp;데이터&nbsp;저장&nbsp;실패.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;OTHERS.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'구매요청&nbsp;생성&nbsp;중&nbsp;알&nbsp;수&nbsp;없는&nbsp;오류&nbsp;발생.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDCASE.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;MESSAGE&nbsp;'구매요청에&nbsp;성공하였습니다.'&nbsp;TYPE&nbsp;'I'.<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;ADD_AFKO<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;생산요청&nbsp;DB&nbsp;추가<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM add_afko .<br />
&nbsp;&nbsp;DATA(lv_answer)&nbsp;=&nbsp;''.<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'POPUP_TO_CONFIRM'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;titlebar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'생산요청&nbsp;생성'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_question&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'생산요청을&nbsp;생성하시겠습니까?'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_button_1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'확인'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text_button_2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'취소'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_button&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'2'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_cancel_button&nbsp;=&nbsp;'&nbsp;'<br />
&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;answer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lv_answer.<br />
<br />
&nbsp;&nbsp;IF&nbsp;lv_answer&nbsp;&lt;&gt;&nbsp;'1'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;lt_production_r&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;zcb_pp_afko.<br />
&nbsp;&nbsp;DATA:&nbsp;ls_production_r&nbsp;TYPE&nbsp;zcb_pp_afko.<br />
<br />
&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;gt_production_r&nbsp;INTO&nbsp;gs_production_r.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;MOVE-CORRESPONDING&nbsp;gs_production_r&nbsp;TO&nbsp;ls_production_r.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;ls_production_r&nbsp;TO&nbsp;lt_production_r.<br />
<br />
&nbsp;&nbsp;ENDLOOP.<br />
<br />
<br />
<br />
<br />
&nbsp;&nbsp;call&nbsp;function&nbsp;<a&nbsp;href&nbsp;="zcb_pp_create_af/zcb_pp_create_af.html">'ZCB_PP_CREATE_AF'</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it_af&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_production_r&nbsp;&nbsp;"&nbsp;생산요청&nbsp;사항<br />
&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;et_afko&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;gt_afko&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;생산오더&nbsp;Header<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;et_afpo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;gt_afpo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;생산오더&nbsp;Item<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXCEPTIONS<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapl_not_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;MAPL&nbsp;TABLE에&nbsp;데이터가&nbsp;없습니다.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plpo_not_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;PLPO&nbsp;TABLE에&nbsp;데이터가&nbsp;없습니다.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plmz_not_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;PLMZ&nbsp;TABLE에&nbsp;데이터가&nbsp;없습니다.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bom_not_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;BOM&nbsp;TABLE에&nbsp;데이터가&nbsp;없습니다.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snro_error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;레인지&nbsp;넘버&nbsp;에러<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db_update_error&nbsp;=&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;DB&nbsp;UPDATE&nbsp;에러<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;7.<br />
<br />
&nbsp;&nbsp;IF&nbsp;sy-subrc&nbsp;&lt;&gt;&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CASE&nbsp;sy-subrc.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;1.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'MAPL&nbsp;테이블에&nbsp;데이터가&nbsp;없습니다.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;2.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'PLPO&nbsp;테이블에&nbsp;데이터가&nbsp;없습니다.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;3.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'PLMZ&nbsp;테이블에&nbsp;데이터가&nbsp;없습니다.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;4.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'BOM&nbsp;테이블에&nbsp;데이터가&nbsp;없습니다.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;5.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'넘버레인지&nbsp;발행에&nbsp;실패했습니다.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;6.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'DB&nbsp;UPDATE&nbsp;에&nbsp;실패했습니다.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;OTHERS.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'생산오더&nbsp;생성&nbsp;중&nbsp;알&nbsp;수&nbsp;없는&nbsp;오류가&nbsp;발생했습니다.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDCASE.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;MESSAGE&nbsp;'생산요청을&nbsp;성공하였습니다.'&nbsp;TYPE&nbsp;'I'.<br />
<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;delete_eban_row<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;구매요청&nbsp;행&nbsp;삭제<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM delete_eban_row .<br />
&nbsp;&nbsp;"&nbsp;ALV에서&nbsp;선택한&nbsp;행&nbsp;인덱스&nbsp;가져오기<br />
&nbsp;&nbsp;DATA:&nbsp;lt_index_rows&nbsp;TYPE&nbsp;lvc_t_row,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lv_index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;sy-tabix,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_index_row&nbsp;&nbsp;TYPE&nbsp;lvc_s_row.<br />
<br />
&nbsp;&nbsp;CALL&nbsp;METHOD&nbsp;go_alv_grid1-&gt;get_selected_rows(<br />
&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;et_index_rows&nbsp;=&nbsp;lt_index_rows&nbsp;).<br />
<br />
&nbsp;&nbsp;IF&nbsp;lt_index_rows&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'삭제할&nbsp;행을&nbsp;선택하세요.'&nbsp;TYPE&nbsp;'I'&nbsp;DISPLAY&nbsp;LIKE&nbsp;'W'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;"&nbsp;역순으로&nbsp;삭제해야&nbsp;옳바른&nbsp;위치의&nbsp;데이터가&nbsp;삭제됨<br />
&nbsp;&nbsp;"&nbsp;ADD1&nbsp;--------------------<br />
&nbsp;&nbsp;"&nbsp;from&nbsp;to&nbsp;로&nbsp;loop&nbsp;돌려서&nbsp;범위&nbsp;값이&nbsp;있으면&nbsp;삭제&nbsp;가능(&nbsp;연속된&nbsp;범위일&nbsp;경우)<br />
&nbsp;&nbsp;"&nbsp;--------------<br />
&nbsp;&nbsp;SORT&nbsp;lt_index_rows&nbsp;BY&nbsp;index&nbsp;DESCENDING.<br />
<br />
&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;lt_index_rows&nbsp;INTO&nbsp;ls_index_row.<br />
&nbsp;&nbsp;&nbsp;&nbsp;lv_index&nbsp;=&nbsp;ls_index_row-index.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;DELETE&nbsp;gt_purchase_r&nbsp;INDEX&nbsp;lv_index.<br />
&nbsp;&nbsp;ENDLOOP.<br />
<br />
&nbsp;&nbsp;PERFORM&nbsp;alv_refresh_0100&nbsp;USING&nbsp;go_alv_grid1.<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;delete_afko_row<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;생산요청&nbsp;행&nbsp;삭제<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM delete_afko_row .<br />
<br />
&nbsp;&nbsp;"&nbsp;ALV에서&nbsp;선택한&nbsp;행&nbsp;인덱스&nbsp;가져오기<br />
&nbsp;&nbsp;DATA:&nbsp;lt_index_rows&nbsp;TYPE&nbsp;lvc_t_row,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lv_index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;sy-tabix,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_index_row&nbsp;&nbsp;TYPE&nbsp;lvc_s_row.<br />
<br />
&nbsp;&nbsp;CALL&nbsp;METHOD&nbsp;go_alv_grid2-&gt;get_selected_rows(<br />
&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;et_index_rows&nbsp;=&nbsp;lt_index_rows&nbsp;).<br />
<br />
&nbsp;&nbsp;IF&nbsp;lt_index_rows&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'삭제할&nbsp;행을&nbsp;선택하세요.'&nbsp;TYPE&nbsp;'I'&nbsp;DISPLAY&nbsp;LIKE&nbsp;'W'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;RETURN.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;"&nbsp;역순으로&nbsp;삭제해야&nbsp;옳바른&nbsp;위치의&nbsp;데이터가&nbsp;삭제됨<br />
&nbsp;&nbsp;SORT&nbsp;lt_index_rows&nbsp;BY&nbsp;index&nbsp;DESCENDING.<br />
<br />
&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;lt_index_rows&nbsp;INTO&nbsp;ls_index_row.<br />
&nbsp;&nbsp;&nbsp;&nbsp;lv_index&nbsp;=&nbsp;ls_index_row-index.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;DELETE&nbsp;gt_production_r&nbsp;INDEX&nbsp;lv_index.<br />
&nbsp;&nbsp;ENDLOOP.<br />
<br />
&nbsp;&nbsp;PERFORM&nbsp;alv_refresh_0100&nbsp;USING&nbsp;go_alv_grid2.<br />
<br />
ENDFORM.<br />
<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;F4_MATNR<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;INPUT&nbsp;FIELD&nbsp;SH&nbsp;커스텀&nbsp;설정<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM f4_matnr .<br />
&nbsp;&nbsp;TYPES:&nbsp;BEGIN&nbsp;OF&nbsp;ty_matnr_help,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matnr&nbsp;TYPE&nbsp;zcb_mara-matnr,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maktx&nbsp;TYPE&nbsp;zcb_makt-maktx,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;ty_matnr_help.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;lt_list&nbsp;&nbsp;&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;ty_matnr_help,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_return&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;ddshretval,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_fields&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;dfies,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_field&nbsp;&nbsp;TYPE&nbsp;dfies.<br />
<br />
&nbsp;&nbsp;"&nbsp;완제품만&nbsp;조회&nbsp;역&nbsp;BOM&nbsp;도&nbsp;추가<br />
&nbsp;&nbsp;SELECT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~matnr,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b~maktx<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;@lt_list<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zcb_mara&nbsp;AS&nbsp;a<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zcb_makt&nbsp;AS&nbsp;b<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ON&nbsp;a~matnr&nbsp;=&nbsp;b~matnr<br />
&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;b~spras&nbsp;=&nbsp;@sy-langu<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;(&nbsp;a~mtart&nbsp;=&nbsp;'ROH'&nbsp;OR&nbsp;a~mtart&nbsp;=&nbsp;'ZSPK'&nbsp;).<br />
<br />
<br />
&nbsp;&nbsp;"&nbsp;F4&nbsp;인터페이스&nbsp;팝업&nbsp;호출<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'F4IF_INT_TABLE_VALUE_REQUEST'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retfield&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'MATNR'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpprog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-repid<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpnr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-dynnr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'S'<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_list<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_return<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_fields<br />
   </div>
   <div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;EXCEPTIONS<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter_error&nbsp;=&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_values_found&nbsp;=&nbsp;2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3.<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;lt_return[]&nbsp;IS&nbsp;NOT&nbsp;INITIAL.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_return&nbsp;INTO&nbsp;DATA(ls_return)&nbsp;INDEX&nbsp;1.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_list&nbsp;INTO&nbsp;DATA(ls_list)&nbsp;WITH&nbsp;KEY&nbsp;matnr&nbsp;=&nbsp;ls_return-fieldval.<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;ls_update&nbsp;TYPE&nbsp;dynpread,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_update&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;dynpread.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;ls_update.<br />
&nbsp;&nbsp;ls_update-fieldname&nbsp;=&nbsp;'ZCB_EBAN-MATNR'.<br />
&nbsp;&nbsp;ls_update-fieldvalue&nbsp;=&nbsp;ls_list-matnr.<br />
&nbsp;&nbsp;APPEND&nbsp;ls_update&nbsp;TO&nbsp;lt_update.<br />
<br />
<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'DYNP_VALUES_UPDATE'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dyname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-cprog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Program&nbsp;Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynumb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-dynnr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Screen&nbsp;number<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpfields&nbsp;=&nbsp;lt_update.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Screen&nbsp;field&nbsp;value&nbsp;reset&nbsp;table<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
<br />
<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;f4_plnbez<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;INPUT&nbsp;FIELD&nbsp;SH&nbsp;커스텀&nbsp;설정<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM f4_plnbez.<br />
&nbsp;&nbsp;TYPES:&nbsp;BEGIN&nbsp;OF&nbsp;ty_matnr_help,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matnr&nbsp;TYPE&nbsp;zcb_mara-matnr,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maktx&nbsp;TYPE&nbsp;zcb_makt-maktx,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;ty_matnr_help.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;lt_list&nbsp;&nbsp;&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;ty_matnr_help,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_return&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;ddshretval,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_fields&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;dfies,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_field&nbsp;&nbsp;TYPE&nbsp;dfies.<br />
<br />
&nbsp;&nbsp;"&nbsp;완제품만&nbsp;조회&nbsp;역&nbsp;BOM&nbsp;도&nbsp;추가<br />
&nbsp;&nbsp;SELECT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~matnr,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b~maktx<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;@lt_list<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zcb_mara&nbsp;AS&nbsp;a<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zcb_makt&nbsp;AS&nbsp;b<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ON&nbsp;a~matnr&nbsp;=&nbsp;b~matnr<br />
&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;b~spras&nbsp;=&nbsp;@sy-langu<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHERE<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;a~mtart&nbsp;=&nbsp;'FERT'&nbsp;OR&nbsp;a~matnr&nbsp;=&nbsp;'RM102'&nbsp;).<br />
<br />
<br />
&nbsp;&nbsp;"&nbsp;F4&nbsp;인터페이스&nbsp;팝업&nbsp;호출<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'F4IF_INT_TABLE_VALUE_REQUEST'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retfield&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'MATNR'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpprog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-repid<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpnr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-dynnr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'S'<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_list<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_return<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_fields<br />
   </div>
   <div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;EXCEPTIONS<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter_error&nbsp;=&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_values_found&nbsp;=&nbsp;2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3.<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;lt_return[]&nbsp;IS&nbsp;NOT&nbsp;INITIAL.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_return&nbsp;INTO&nbsp;DATA(ls_return)&nbsp;INDEX&nbsp;1.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_list&nbsp;INTO&nbsp;DATA(ls_list)&nbsp;WITH&nbsp;KEY&nbsp;&nbsp;matnr&nbsp;=&nbsp;ls_return-fieldval.<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;ls_update&nbsp;TYPE&nbsp;dynpread,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_update&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;dynpread.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;ls_update.<br />
&nbsp;&nbsp;ls_update-fieldname&nbsp;=&nbsp;'ZCB_AFKO-PLNBEZ'.<br />
&nbsp;&nbsp;ls_update-fieldvalue&nbsp;=&nbsp;ls_list-matnr.<br />
&nbsp;&nbsp;APPEND&nbsp;ls_update&nbsp;TO&nbsp;lt_update.<br />
<br />
<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'DYNP_VALUES_UPDATE'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dyname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-cprog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Program&nbsp;Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynumb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-dynnr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Screen&nbsp;number<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpfields&nbsp;=&nbsp;lt_update.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Screen&nbsp;field&nbsp;value&nbsp;reset&nbsp;table<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;f4_werks1<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;INPUT&nbsp;FIELD&nbsp;SH&nbsp;커스텀&nbsp;설정<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM f4_werks1.<br />
&nbsp;&nbsp;TYPES:&nbsp;BEGIN&nbsp;OF&nbsp;ty_werks_help,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;werks&nbsp;TYPE&nbsp;zcb_t001w-werks,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name1&nbsp;TYPE&nbsp;zcb_t001w-name1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;ty_werks_help.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;lt_list&nbsp;&nbsp;&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;ty_werks_help,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_return&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;ddshretval,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_fields&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;dfies,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_field&nbsp;&nbsp;TYPE&nbsp;dfies.<br />
<br />
&nbsp;&nbsp;"&nbsp;VLFKZ&nbsp;=&nbsp;'A'&nbsp;조건만&nbsp;조회<br />
&nbsp;&nbsp;SELECT&nbsp;werks,&nbsp;name1<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;@lt_list<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zcb_t001w<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;vlfkz&nbsp;=&nbsp;'A'.<br />
<br />
&nbsp;&nbsp;"&nbsp;F4&nbsp;인터페이스&nbsp;팝업&nbsp;호출<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'F4IF_INT_TABLE_VALUE_REQUEST'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retfield&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'WERKS'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpprog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-repid<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpnr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-dynnr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynprofield&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'PA_WERKS'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'S'<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_list<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_return<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_fields<br />
   </div>
   <div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;EXCEPTIONS<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter_error&nbsp;=&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_values_found&nbsp;=&nbsp;2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3.<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;lt_return[]&nbsp;IS&nbsp;NOT&nbsp;INITIAL.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_return&nbsp;INTO&nbsp;DATA(ls_return)&nbsp;INDEX&nbsp;1.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_list&nbsp;INTO&nbsp;DATA(ls_list)&nbsp;WITH&nbsp;KEY&nbsp;&nbsp;werks&nbsp;=&nbsp;ls_return-fieldval.<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;ls_update&nbsp;TYPE&nbsp;dynpread,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_update&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;dynpread.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;ls_update.<br />
&nbsp;&nbsp;ls_update-fieldname&nbsp;=&nbsp;'ZCB_EBAN-WERKS'.<br />
&nbsp;&nbsp;ls_update-fieldvalue&nbsp;=&nbsp;ls_list-werks.<br />
&nbsp;&nbsp;APPEND&nbsp;ls_update&nbsp;TO&nbsp;lt_update.<br />
<br />
<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'DYNP_VALUES_UPDATE'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dyname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-cprog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Program&nbsp;Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynumb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-dynnr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Screen&nbsp;number<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpfields&nbsp;=&nbsp;lt_update.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Screen&nbsp;field&nbsp;value&nbsp;reset&nbsp;table<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
ENDFORM.<br />
   </div>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Form&nbsp;f4_werks2<br />
*&---------------------------------------------------------------------*<br />
*&&nbsp;INPUT&nbsp;FIELD&nbsp;SH&nbsp;커스텀&nbsp;설정<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
FORM f4_werks2.<br />
&nbsp;&nbsp;TYPES:&nbsp;BEGIN&nbsp;OF&nbsp;ty_werks_help,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;werks&nbsp;TYPE&nbsp;zcb_t001w-werks,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name1&nbsp;TYPE&nbsp;zcb_t001w-name1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;ty_werks_help.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;lt_list&nbsp;&nbsp;&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;ty_werks_help,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_return&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;ddshretval,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_fields&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;dfies,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ls_field&nbsp;&nbsp;TYPE&nbsp;dfies.<br />
<br />
&nbsp;&nbsp;"&nbsp;VLFKZ&nbsp;=&nbsp;'A'&nbsp;조건만&nbsp;조회<br />
&nbsp;&nbsp;SELECT&nbsp;werks,&nbsp;name1<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;@lt_list<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zcb_t001w<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;vlfkz&nbsp;=&nbsp;'A'.<br />
<br />
&nbsp;&nbsp;"&nbsp;F4&nbsp;인터페이스&nbsp;팝업&nbsp;호출<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'F4IF_INT_TABLE_VALUE_REQUEST'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retfield&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'WERKS'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpprog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-repid<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpnr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-dynnr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynprofield&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'PA_WERKS'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'S'<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_list<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_return<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field_tab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;lt_fields<br />
   </div>
   <div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;EXCEPTIONS<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter_error&nbsp;=&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_values_found&nbsp;=&nbsp;2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;3.<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;lt_return[]&nbsp;IS&nbsp;NOT&nbsp;INITIAL.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_return&nbsp;INTO&nbsp;DATA(ls_return)&nbsp;INDEX&nbsp;1.<br />
<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;lt_list&nbsp;INTO&nbsp;DATA(ls_list)&nbsp;WITH&nbsp;KEY&nbsp;&nbsp;werks&nbsp;=&nbsp;ls_return-fieldval.<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
&nbsp;&nbsp;DATA:&nbsp;ls_update&nbsp;TYPE&nbsp;dynpread,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt_update&nbsp;TYPE&nbsp;TABLE&nbsp;OF&nbsp;dynpread.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;ls_update.<br />
&nbsp;&nbsp;ls_update-fieldname&nbsp;=&nbsp;'ZCB_AFKO-WERKS'.<br />
&nbsp;&nbsp;ls_update-fieldvalue&nbsp;=&nbsp;ls_list-werks.<br />
&nbsp;&nbsp;APPEND&nbsp;ls_update&nbsp;TO&nbsp;lt_update.<br />
<br />
<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'DYNP_VALUES_UPDATE'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dyname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-cprog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Program&nbsp;Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynumb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sy-dynnr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Screen&nbsp;number<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynpfields&nbsp;=&nbsp;lt_update.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;Screen&nbsp;field&nbsp;value&nbsp;reset&nbsp;table<br />
<br />
&nbsp;&nbsp;CHECK&nbsp;sy-subrc&nbsp;EQ&nbsp;0.<br />
<br />
ENDFORM.<br />
            </div>
          </td>
        </tr>
      </table>
      </td>
      </tr>
   <tr>
<td class="footer">Extracted by Mass Download version 1.5.5 - E.G.Mellodew. 1998-2025. Sap Release 758</td>
   </tr>
</table>
</body>
</html>
